<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hack Centauri Sign Up</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body, html {
            height: 100%;
            overflow: hidden;
        }
        body {
            font-family: 'Orbitron', sans-serif;
            color: #ffffff;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        canvas {
            height: auto;
            background: radial-gradient(ellipse at bottom, #0c1116 0%, #161927 100%);
            position: absolute;
            left: 0;
            top: 0;
            z-index: -1;
        }

        /* New Info Box Styles */
        .info-box {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(17, 17, 17, 0.9);
            border: 2px solid #ffffff;
            border-radius: 10px;
            padding: 20px;
            width: 300px;
            z-index: 1000;
            box-shadow: 0 0 30px rgba(255, 255, 255, 0.3);
            backdrop-filter: blur(10px);
            opacity: 0;
            transition: opacity 1s ease-in-out;
        }

        .info-text {
            color: #ffffff;
            font-size: 1rem;
            line-height: 1.5;
            margin: 0;
            min-height: 100px;
            text-align: left;
            display: inline;
        }

        .typing-cursor {
            display: inline-block;
            width: 3px;
            height: 20px;
            background: #fff;
            margin-left: 5px;
            animation: blink 1s infinite;
            vertical-align: middle;
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0; }
        }

        .container {
            background-color: rgba(17, 17, 17, 0.8);
            padding: 2rem;
            border-radius: 20px;
            border: 2px solid #ffffff;
            text-align: center;
            max-width: 500px;
            width: 80%;
            height: 90vh;
            position: relative;
            overflow-y: auto;
            box-shadow: 0 0 30px rgba(255, 255, 255, 0.3);
            backdrop-filter: blur(10px);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: space-between;
        }
        h1 {
            font-size: 2rem;
            letter-spacing: 4px;
            text-transform: uppercase;
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.7);
            margin-bottom: 1.5rem;
        }
        #blackhole {
            height: 100%;
            width: 100%;
            position: fixed;
            top: 0;
            left: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            background-color: rgba(25, 25, 25, 1);
            transition: transform 2s ease-in-out, opacity 1s ease-in-out;
        }

        #signup-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            opacity: 0;
            transition: opacity 1s ease-in-out;
            z-index: 999;
        }

        .zoom-out {
            transform: scale(10);
            opacity: 0;
        }

        .centerHover {
            width: 255px;
            height: 255px;
            background-color: transparent;
            border-radius: 50%;
            position: absolute;
            cursor: pointer;
            line-height: 255px;
            text-align: center;
            transition: all 500ms;
            z-index: 2;
        }

        .centerHover span {
            color: #666;
            font-family: serif;
            font-size: 18px;
            position: relative;
            transition: all 500ms;
        }

        .centerHover span:before,
        .centerHover span:after {
            content: '';
            display: inline-block;
            height: 1px;
            width: 16px;
            margin: 0 12px 4px;
            background-color: #666;
            transition: all 500ms;
        }

        .centerHover:hover span {
            color: #DDD;
        }

        .centerHover:hover span:before,
        .centerHover span:after {
            background-color: #DDD;
        }

        #starfield-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            transform: scale(1.5);
            transition: opacity 1s ease-in-out, transform 1s ease-in-out;
        }

        .zoom-in {
            opacity: 1 !important;
            transform: scale(1) !important;
        }

        .sponsor-btn, .signup-toggle-btn {
            display: inline-block;
            margin: 20px 0;
            padding: 15px 30px;
            font-family: 'Orbitron', sans-serif;
            font-size: 1.2rem;
            color: #fff;
            text-decoration: none;
            text-transform: uppercase;
            letter-spacing: 2px;
            background: transparent;
            border: 2px solid #fff;
            border-radius: 5px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.3);
            cursor: pointer;
            min-width: 200px;
        }

        .sponsor-btn:hover, .signup-toggle-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            box-shadow: 0 0 30px rgba(255, 255, 255, 0.5);
            transform: translateY(-2px);
        }

        .sponsor-btn:active, .signup-toggle-btn:active {
            transform: translateY(1px);
        }

        /* Custom form styles */
        .signup-container {
            background: rgba(0, 0, 0, 0.2);
            border: 2px solid #fff;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.3);
            max-width: 450px;
            width: 100%;
            text-align: center;
            backdrop-filter: blur(5px);
            display: none;
            margin: 20px 0;
        }

        .form-step {
            display: none;
            animation: fadeIn 0.5s;
        }

        .form-step.active {
            display: block;
        }

        input {
            width: 90%;
            padding: 10px;
            margin: 10px auto;
            background: transparent;
            border: 2px solid #fff;
            border-radius: 5px;
            color: #fff;
            outline: none;
            transition: border-color 0.3s;
            text-align: center;
        }

        input:focus {
            border-color: #fff;
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
        }

        .switch-container {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 20px 0;
        }

        .switch {
            position: relative;
            width: 60px;
            height: 34px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: transparent;
            border: 2px solid #fff;
            transition: .4s;
            border-radius: 34px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 26px;
            width: 26px;
            left: 2px;
            bottom: 2px;
            background-color: #fff;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .slider {
            background-color: #fff;
        }

        input:checked + .slider:before {
            transform: translateX(26px);
        }

        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
            gap: 10px;
        }

        button {
            background: transparent;
            border: 2px solid #fff;
            color: #fff;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
        }

        button:hover:not(:disabled) {
            background: rgba(255, 255, 255, 0.1);
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
        }

        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>
    <div class="info-box">
        <p class="info-text"></p>
        <span class="typing-cursor"></span>
    </div>
    <div id="blackhole">
        <div class="centerHover"><span>ENTER</span></div>
    </div>
    <div id="starfield-container">
        <canvas id="starfield" width="3000" height="2000"></canvas>
    </div>
    <div id="signup-container">
        <div class="container">
            <h1>HACK CENTAURI</h1>
            <button class="signup-toggle-btn">Sign Up Now</button>
            <div class="signup-container">
                <form id="signupForm">
                    <div class="form-step active" data-step="1">
                        <h2>First Name</h2>
                        <input type="text" name="firstName" required>
                    </div>
                    
                    <div class="form-step" data-step="2">
                        <h2>Last Name</h2>
                        <input type="text" name="lastName" required>
                    </div>
                    
                    <div class="form-step" data-step="3">
                        <h2>Email</h2>
                        <input type="email" name="email" required>
                    </div>
                    
                    <div class="form-step" data-step="4">
                        <h2>Phone Number</h2>
                        <input type="tel" name="phone" required>
                    </div>
                    
                    <div class="form-step" data-step="5">
                        <h2>Confirm Registration</h2>
                        <div class="switch-container">
                            <label class="switch">
                                <input type="checkbox" id="launchToggle">
                                <span class="slider"></span>
                            </label>
                        </div>
                    </div>

                    <div class="nav-buttons">
                        <div>
                            <button type="button" id="prevBtn" style="display: none;">Previous</button>
                        </div>
                        <div>
                            <button type="button" id="nextBtn">Next</button>
                        </div>
                    </div>
                </form>
            </div>
            <a href="sponsors.html" class="sponsor-btn">Sponsor Page</a>
        </div>
    </div>

    <script>
        // Info box typing effect
        const messages = [
            "Welcome to Hack Centauri!",
            "An aerospace-themed hackathon for middle and high school students.",
            "Join us on March 1st for an amazing experience!",
            "Learn, create, and innovate with fellow space enthusiasts.",
            "For business inquiries, please visit our sponsor page.",
            "Registration is now open - sign up today!"
        ];

        let currentMessageIndex = 0;
        let currentCharIndex = 0;
        const infoText = document.querySelector('.info-text');
        const infoBox = document.querySelector('.info-box');
        
        function typeWriter() {
            if (currentCharIndex < messages[currentMessageIndex].length) {
                infoText.textContent += messages[currentMessageIndex][currentCharIndex];
                currentCharIndex++;
                setTimeout(typeWriter, 50);
            } else {
                setTimeout(eraseText, 3000);
            }
        }

        function eraseText() {
            if (infoText.textContent.length > 0) {
                infoText.textContent = infoText.textContent.slice(0, -1);
                setTimeout(eraseText, 30);
            } else {
                currentCharIndex = 0;
                currentMessageIndex = (currentMessageIndex + 1) % messages.length;
                setTimeout(typeWriter, 500);
            }
        }

        // Start the typing animation after a delay
        window.addEventListener('load', () => {
            setTimeout(() => {
                infoBox.style.opacity = '1';
                typeWriter();
            }, 1000);
        });

        // Starfield effect
        function getRandom(min, max) {
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }

        function setCoordinate(c, maxWidth) {
            if (c >= maxWidth) return c % maxWidth;
            else if (c <= 0) return maxWidth + c;
            else return c;
        }

        const canvas = document.getElementById("starfield");
        const context = canvas.getContext("2d");
        const colorrange = [0, 60, 240];

        class Star {
            constructor() {
                this.x = Math.random() * window.innerWidth;
                this.y = Math.random() * window.innerHeight;
                this.radius = Math.random() * 1.2;
                this.hue = colorrange[getRandom(0, colorrange.length - 1)];
                this.sat = getRandom(50, 100);
                this.depth = getRandom(1, 3);
            }

            draw() {
                context.beginPath();
                context.arc(this.x, this.y, this.radius, 0, 369);
                context.fillStyle = "hsl(" + this.hue + ", " + this.sat + "%, 88%)";
                context.fill();
            }

            animate() {
                switch (this.depth) {
                    case 1:
                        this.x = setCoordinate(this.x - 0.3, window.outerWidth);
                        this.y = setCoordinate(this.y + 0.1, window.outerHeight);
                        break;
                    case 2:
                        this.x = setCoordinate(this.x - 0.6, window.outerWidth);
                        this.y = setCoordinate(this.y + 0.2, window.outerHeight);
                        break;
                    case 3:
                        this.x = setCoordinate(this.x - 0.9, window.outerWidth);
                        this.y = setCoordinate(this.y + 0.3, window.outerHeight);
                        break;
                }
            }
        }

        class Stars {
            constructor() {
                this.generate();
            }

            animate() {
                context.clearRect(0, 0, canvas.width, canvas.height);
                this.starArray.forEach((star) => {
                    star.animate();
                    star.draw();
                });
                requestAnimationFrame(() => this.animate());
            }

            onResize() {
                this.generate();
            }

            generate() {
                context.clearRect(0, 0, canvas.width, canvas.height);
                this.size = Math.round((window.outerWidth * window.outerHeight) / 1000);
                this.starArray = new Array(this.size);
                for (let i = 0; i < this.size; i++) {
                    this.starArray[i] = new Star();
                    this.starArray[i].draw();
                }
            }
        }

        function main() {
            let stars = new Stars();
            window.addEventListener("resize", () => stars.onResize());
            stars.animate();
        }

        function blackhole(element) {
            var h = $(element).height(),
                w = $(element).width(),
                cw = w,
                ch = h,
                maxorbit = 255, // distance from center
                centery = ch / 2,
                centerx = cw / 2;

            var startTime = new Date().getTime();
            var currentTime = 0;

            var stars = [],
                collapse = false, // if hovered
                expanse = false; // if clicked

            var canvas = $('<canvas/>').attr({width: cw, height: ch}).appendTo(element),
                context = canvas.get(0).getContext("2d");

            context.globalCompositeOperation = "multiply";

            function setDPI(canvas, dpi) {
                if (!canvas.get(0).style.width)
                    canvas.get(0).style.width = canvas.get(0).width + 'px';
                if (!canvas.get(0).style.height)
                    canvas.get(0).style.height = canvas.get(0).height + 'px';

                var scaleFactor = dpi / 96;
                canvas.get(0).width = Math.ceil(canvas.get(0).width * scaleFactor);
                canvas.get(0).height = Math.ceil(canvas.get(0).height * scaleFactor);
                var ctx = canvas.get(0).getContext('2d');
                ctx.scale(scaleFactor, scaleFactor);
            }

            function rotate(cx, cy, x, y, angle) {
                var radians = angle,
                    cos = Math.cos(radians),
                    sin = Math.sin(radians),
                    nx = (cos * (x - cx)) + (sin * (y - cy)) + cx,
                    ny = (cos * (y - cy)) - (sin * (x - cx)) + cy;
                return [nx, ny];
            }

            setDPI(canvas, 192);

            var star = function(){
                var rands = [];
                rands.push(Math.random() * (maxorbit/2) + 1);
                rands.push(Math.random() * (maxorbit/2) + maxorbit);

                this.orbital = (rands.reduce(function(p, c) {
                    return p + c;
                }, 0) / rands.length);

                this.x = centerx;
                this.y = centery + this.orbital;

                this.yOrigin = centery + this.orbital; 
                this.speed = (Math.floor(Math.random() * 2.5) + 1.5)*Math.PI/180;
                this.rotation = 0;
                this.startRotation = (Math.floor(Math.random() * 360) + 1)*Math.PI/180;

                this.id = stars.length;

                this.collapseBonus = this.orbital - (maxorbit * 0.7);
                if(this.collapseBonus < 0){
                    this.collapseBonus = 0;
                }

                stars.push(this);
                this.color = 'rgba(255,255,255,'+ (1 - ((this.orbital) / 255)) +')';

                this.hoverPos = centery + (maxorbit/2) + this.collapseBonus;
                this.expansePos = centery + (this.id%100)*-10 + (Math.floor(Math.random() * 20) + 1);

                this.prevR = this.startRotation;
                this.prevX = this.x;
                this.prevY = this.y;
            }

            star.prototype.draw = function(){
                if(!expanse){
                    this.rotation = this.startRotation + (currentTime * this.speed);
                    if(!collapse){
                        if(this.y > this.yOrigin){
                            this.y-= 2.5;
                        }
                        if(this.y < this.yOrigin-4){
                            this.y+= (this.yOrigin - this.y) / 10;
                        }
                    } else {
                        this.trail = 1;
                        if(this.y > this.hoverPos){
                            this.y-= (this.hoverPos - this.y) / -5;
                        }
                        if(this.y < this.hoverPos-4){
                            this.y+= 2.5;
                        }
                    }
                } else {
                    this.rotation = this.startRotation + (currentTime * (this.speed / 2));
                    if(this.y > this.expansePos){
                        this.y-= Math.floor(this.expansePos - this.y) / -140;
                    }
                }

                context.save();
                context.fillStyle = this.color;
                context.strokeStyle = this.color;
                context.beginPath();
                var oldPos = rotate(centerx,centery,this.prevX,this.prevY,-this.prevR);
                context.moveTo(oldPos[0],oldPos[1]);
                context.translate(centerx, centery);
                context.rotate(this.rotation);
                context.translate(-centerx, -centery);
                context.lineTo(this.x,this.y);
                context.stroke();
                context.restore();

                this.prevR = this.rotation;
                this.prevX = this.x;
                this.prevY = this.y;
            }

            $('.centerHover').on('click', function(){
                collapse = false;
                expanse = true;

                $(this).addClass('open');
                setTimeout(function(){
                    $('#blackhole').addClass('zoom-out');
                    setTimeout(function() {
                        $('#blackhole').hide();
                        $('#starfield-container').show();
                        setTimeout(function() {
                            $('#starfield-container').addClass('zoom-in');
                            setTimeout(function() {
                                $('#signup-container').css('opacity', '1');
                            }, 500);
                        }, 50);
                        initStarfield();
                    }, 2000);
                }, 500);
            });

            $('.centerHover').on('mouseover', function(){
                if(expanse == false){
                    collapse = true;
                }
            });
            $('.centerHover').on('mouseout', function(){
                if(expanse == false){
                    collapse = false;
                }
            });

            window.requestFrame = (function(){
                return  window.requestAnimationFrame       ||
                    window.webkitRequestAnimationFrame ||
                    window.mozRequestAnimationFrame    ||
                    function( callback ){
                    window.setTimeout(callback, 1000 / 60);
                };
            })();

            function loop(){
                var now = new Date().getTime();
                currentTime = (now - startTime) / 50;

                context.fillStyle = 'rgba(25,25,25,0.2)';
                context.fillRect(0, 0, cw, ch);

                for(var i = 0; i < stars.length; i++){
                    if(stars[i] != stars){
                        stars[i].draw();
                    }
                }

                requestFrame(loop);
            }

            function init(time){
                context.fillStyle = 'rgba(25,25,25,1)';
                context.fillRect(0, 0, cw, ch);
                for(var i = 0; i < 2500; i++){
                    new star();
                }
                loop();
            }
            init();
        }

        $(document).ready(function() {
            blackhole('#blackhole');

            // Toggle signup form visibility
            $('.signup-toggle-btn').click(function() {
                $('.signup-container').slideToggle();
                $(this).text($(this).text() === 'Sign Up Now' ? 'Hide Sign Up' : 'Sign Up Now');
            });

            // Custom form initialization
            let currentStep = 1;
            const form = document.getElementById('signupForm');
            const steps = document.querySelectorAll('.form-step');
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            const launchToggle = document.getElementById('launchToggle');

            function showStep(step) {
                steps.forEach(s => s.classList.remove('active'));
                document.querySelector(`[data-step="${step}"]`).classList.add('active');
                
                prevBtn.style.display = step === 1 ? 'none' : 'block';
                
                if (step === 5) {
                    nextBtn.textContent = 'Launch!';
                    nextBtn.disabled = true;
                } else {
                    nextBtn.textContent = 'Next';
                    nextBtn.disabled = false;
                }
            }

            prevBtn.addEventListener('click', () => {
                if (currentStep > 1) {
                    currentStep--;
                    showStep(currentStep);
                }
            });

            launchToggle.addEventListener('change', () => {
                nextBtn.disabled = !launchToggle.checked;
            });

            nextBtn.addEventListener('click', () => {
                const currentInput = document.querySelector(`[data-step="${currentStep}"] input`);
                
                if (currentStep === 5) {
                    if (launchToggle.checked) {
                        // Get form data
                        const formData = new FormData(form);
                        const data = {
                            firstName: formData.get('firstName'),
                            lastName: formData.get('lastName'),
                            email: formData.get('email'),
                            phone: formData.get('phone')
                        };

                        // Show success message immediately
                        alert('Launch successful!');
                        form.reset();
                        currentStep = 1;
                        showStep(1);
                        launchToggle.checked = false;

                        // Send data to Google Apps Script in the background
                        fetch('https://script.google.com/macros/s/AKfycbwrFjpE0Hks8D1gnadA83pXQzGl5LqLzmn8c-C5kiw4kri0IMLsFa6iMYTfE62-V7jCMw/exec', {
                            method: 'POST',
                            mode: 'no-cors',
                            headers: {
                                'Content-Type': 'text/plain',
                            },
                            body: JSON.stringify(data)
                        })
                        .catch(error => {
                            console.error('Error:', error);
                            // Silently log error but don't show to user since form completion already shown
                        });
                    }
                    return;
                }
                
                if (currentInput && currentInput.checkValidity()) {
                    currentStep++;
                    showStep(currentStep);
                } else if (currentInput) {
                    currentInput.reportValidity();
                }
            });

            showStep(1);
        });

        function initStarfield() {
            main();
            resizeCanvas();
        }

        function resizeCanvas() {
            const canvas = document.getElementById('starfield');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }

        window.addEventListener('resize', resizeCanvas);
    </script>
</body>
</html>
